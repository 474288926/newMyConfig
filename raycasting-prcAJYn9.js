import{S as e,P as a,W as t,A as s,O as o,M as l,a as n,b as i,R as c,V as r,u as d}from"./updateSize-GeXudlkc.js";import{d as u,x as w,y as m,r as v,o as f,s as p,c as j,e as b,f as x}from"./index-aFbpbZBK.js";const h={class:"flex-1 overflow-hidden"},y=u({__name:"raycasting",setup(u){const y=w(),{isCollapse:C}=m(y),S=v(null),g=new e,k=new a(45,1,.1,1e3);k.position.set(2,2,15),k.lookAt(0,0,0);const A=new t,E=new s(5);g.add(E);const _=new o(k,A.domElement),F=new l(new n(1,32,32),new i({color:65280}));F.position.x=-4,g.add(F);const H=new l(new n(1,32,32),new i({color:16711935}));H.position.x=4,g.add(H);const O=new c,R=new r,W=e=>{var a,t;S.value&&(R.x=(e.clientX-(C?72:223))/((null==(a=S.value)?void 0:a.clientWidth)||0)*2-1,R.y=-(e.clientY-130)/((null==(t=S.value)?void 0:t.clientHeight)||0)*2+1),(()=>{O.setFromCamera(R,k);const e=O.intersectObjects([F,H]);if(e.length>0){if(e[0].object.isSelect)return e[0].object.isSelect=!1,void e[0].object.material.color.set(e[0].object.oldClor);e[0].object.isSelect=!0,e[0].object.oldClor=e[0].object.material.color.getHex(),e[0].object.material.color.set(16711680)}})()},q=()=>{_.update(),requestAnimationFrame(q),A.render(g,k)};return f((async()=>{var e;await p(),S.value&&(d(S.value,k,A),null==(e=S.value)||e.appendChild(A.domElement),window.addEventListener("click",W)),q()})),(e,a)=>(j(),b("div",h,[x("div",{ref_key:"canvasRef",ref:S,class:"h-full"},null,512)]))}});export{y as default};
