import{S as a,F as e,P as t,W as s,O as n,B as o,a as r,T as i,b as l,c as u,d,e as p,u as c,V as w}from"./updateSize-l203fZic.js";import{T as f,E as m,u as v}from"./tween.module-upfANlK2.js";import{d as y,r as b,o as h,s as x,c as g,e as A,f as M,u as E}from"./index-WKXDDgqB.js";const z={class:"flex-1 overflow-hidden"},C={class:"absolute top-0 left-0 flex gap-8 flex-col"},j=y({__name:"particleEffects",setup(y){const j=b(null),k=new a;k.fog=new e(328972,5e-4);const P=new t(60,1,10,1e4);P.position.set(90,140,200);const R=new s;R.setPixelRatio(window.devicePixelRatio);const _=new n(P,R.domElement),F=new o,S=new Float32Array(45e3);F.setAttribute("position",new r(S,3));const T=(new i).load("/newMyConfig/three/gradient.png"),B=new l({size:4,transparent:!0,map:T}),I=new u(F,B);k.add(I);const L=F.getAttribute("position"),O=new d(40,40,40,10,10,10).getAttribute("position"),U=new p(30,30,30).getAttribute("position"),V=b(0),W=(a,e)=>{const t=[],{array:s,count:n}=a;V.value=V.value>n?V.value:n;for(let o=0;o<V.value;o+=1){const a=new w(F.attributes.position.array[3*o],F.attributes.position.array[3*o+1],F.attributes.position.array[3*o+2]);t.push(new f(a).easing(m.Exponential.In)),t[o].to({x:2*s[3*o]+e,y:2*s[3*o+1],z:2*s[3*o+2]},1e3*Math.random()).delay(800*Math.random()).onUpdate((()=>{L.array[3*o]=a.x,L.array[3*o+1]=a.y,L.array[3*o+2]=a.z,F.setAttribute("position",new r(L.array,3))})),t[o].start()}},q=()=>{_.update(),v(),R.render(k,P)};return h((async()=>{var a;await x(),j.value&&(c(j.value,P,R),null==(a=j.value)||a.appendChild(R.domElement)),(()=>{const a=L.array;for(let e=0,t=15e3,s=0;e<t;e+=1,s+=3)a[s]=2e3*(Math.random()-.5),a[s+1]=2e3*(Math.random()-.5),a[s+2]=2e3*(Math.random()-.5)})(),R.setAnimationLoop(q)})),(a,e)=>(g(),A("div",z,[M("div",C,[M("div",{class:"cursor-pointer",onClick:e[0]||(e[0]=a=>W(E(O),100))},"方形"),M("div",{class:"cursor-pointer",onClick:e[1]||(e[1]=a=>W(E(U),-100))},"圆形")]),M("div",{ref_key:"canvasRef",ref:j,class:"h-full"},null,512)]))}});export{j as default};
