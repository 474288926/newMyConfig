import{S as e,P as a,W as t,A as o,O as s,g as l,f as n,M as i,k as c,l as r,u as d}from"./updateSize-eKcqFK11.js";import{d as u,x as w,y as v,r as m,o as f,s as p,c as j,e as b,f as x}from"./index-lt5_XWqq.js";const h={class:"flex-1 overflow-hidden"},g=u({__name:"raycasting",setup(u){const g=w(),{isCollapse:y}=v(g),C=m(null),S=new e,k=new a(45,1,.1,1e3);k.position.set(2,2,15),k.lookAt(0,0,0);const A=new t,E=new o(5);S.add(E);const _=new s(k,A.domElement),H=new l(new n(1,32,32),new i({color:65280}));H.position.x=-4,S.add(H);const L=new l(new n(1,32,32),new i({color:16711935}));L.position.x=4,S.add(L);const O=new c,W=new r,z=e=>{var a,t;C.value&&(W.x=(e.clientX-(y?72:223))/((null==(a=C.value)?void 0:a.clientWidth)||0)*2-1,W.y=-(e.clientY-130)/((null==(t=C.value)?void 0:t.clientHeight)||0)*2+1),(()=>{O.setFromCamera(W,k);const e=O.intersectObjects([H,L]);if(e.length>0){if(e[0].object.isSelect)return e[0].object.isSelect=!1,void e[0].object.material.color.set(e[0].object.oldClor);e[0].object.isSelect=!0,e[0].object.oldClor=e[0].object.material.color.getHex(),e[0].object.material.color.set(16711680)}})()},F=()=>{_.update(),A.render(S,k)};return f((async()=>{var e;await p(),C.value&&(d(C.value,k,A),null==(e=C.value)||e.appendChild(A.domElement),window.addEventListener("click",z)),A.setAnimationLoop(F)})),(e,a)=>(j(),b("div",h,[x("div",{ref_key:"canvasRef",ref:C,class:"h-full"},null,512)]))}});export{g as default};
