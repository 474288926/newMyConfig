import{S as a,F as t,P as e,W as o,O as n,B as s,a as r,T as i,b as l,c as d,d as p,e as u,f as c,u as w,V as m}from"./updateSize-eKcqFK11.js";import{T as f,E as v,u as y}from"./tween.module-upfANlK2.js";import{d as h,r as M,o as b,s as x,c as A,e as g,f as z,u as E}from"./index-vlyQ2Qk7.js";const k={class:"flex-1 overflow-hidden"},C={class:"absolute top-0 left-0 flex gap-8 flex-col"},P=h({__name:"particleEffects",setup(h){const P=M(null),j=new a;j.fog=new t(328972,5e-4);const F=new e(60,1,100,1e4);F.position.set(90,140,200);const R=new o;R.setPixelRatio(window.devicePixelRatio);const S=new n(F,R.domElement),_=new s,I=new s,T=new Float32Array(3e3),B=new Float32Array(600);for(let a=0,t=1e3,e=0;a<t;a+=1,e+=3)T[e]=800*Math.random()-400,T[e+1]=800*Math.random()-400,T[e+2]=800*Math.random()-400,a<200&&(B[e]=800*Math.random()-400,B[e+1]=800*Math.random()-400,B[e+2]=800*Math.random()-400);_.setAttribute("position",new r(T,3)),I.setAttribute("position",new r(B,3));const L=(new i).load("/newMyConfig/three/gradient.png");L.colorSpace=l;const O=new d({size:4,transparent:!0,map:L}),U=new d({size:2,transparent:!0,map:L}),V=new p(_,O),W=new p(I,U);j.add(V),j.add(W);const X=_.getAttribute("position"),q=new u(100,100,100,10,10,10).getAttribute("position"),D=new c(100,20,20).getAttribute("position"),G=M(0),H=(a,t)=>{const{array:e,count:o}=a;G.value=G.value>o?G.value:o;for(let n=0;n<G.value;n+=1){const a=new m(_.attributes.position.array[3*n]-t,_.attributes.position.array[3*n+1],_.attributes.position.array[3*n+2]);new f(a).easing(v.Exponential.In).to({x:void 0===e[3*n]?800*Math.random()-400:e[3*n]+t,y:void 0===e[3*n+1]?800*Math.random()-400:e[3*n+1],z:void 0===e[3*n+2]?800*Math.random()-400:e[3*n+2]},1e3).delay(400*Math.random()).onUpdate((()=>{X.array[3*n]=a.x+t,X.array[3*n+1]=a.y,X.array[3*n+2]=a.z,_.setAttribute("position",new r(X.array,3))})).start()}},J=()=>{S.update(),W.rotateX(Math.PI/1e3),y(),F.lookAt(j.position),R.render(j,F)};return b((async()=>{var a;await x(),P.value&&(w(P.value,F,R),null==(a=P.value)||a.appendChild(R.domElement)),R.setAnimationLoop(J)})),(a,t)=>(A(),g("div",k,[z("div",C,[z("div",{class:"cursor-pointer",onClick:t[0]||(t[0]=a=>H(E(q),80))},"方形"),z("div",{class:"cursor-pointer",onClick:t[1]||(t[1]=a=>H(E(D),-80))},"圆形")]),z("div",{ref_key:"canvasRef",ref:P,class:"h-full"},null,512)]))}});export{P as default};
